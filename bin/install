#!/bin/bash

set -e

has_brew() {
  if [ ! -f "$(which brew)" ]; then
    echo 'Please install brew.'
    echo '  See http://brew.sh'
    echo ''
    echo '  To install:'
    echo '  ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"'
    exit 1
  fi
  return 0
}

has_stow() {
  if [ ! -f "$(which stow)" ]; then
    echo 'Please install stow.'
    echo '  See http://www.gnu.org/software/stow/'
    echo ''
    echo '  To install:'
    echo '  brew install stow'
    exit 1
  fi
  return 0
}

stow_it() {
  stow --verbose files || echo 'Unable to stow.'
}

setup_vim() {
  [ ! -d $HOME/.vim/bundle/vundle ] && git clone https://github.com/gmarik/Vundle.vim.git ~/.vim/bundle/vundle.vim
}

has_brew
has_stow
stow_it
setup_vim
echo 'Installation complete'
